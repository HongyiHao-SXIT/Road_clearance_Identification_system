<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>垃圾检测统计分析</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body {
            background: #f8fafc;
            padding: 40px;
        }

        .container {
            max-width: 1100px;
            gap: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }

        h2 {
            font-weight: 800;
            color: #1e293b;
            margin-bottom: 40px;
        }
    </style>
</head>

<body>
    <h2>垃圾检测结果统计分析</h2>
    <div class="container">
        <div class="chart-card" id="pieChart" style="height: 400px;"></div>
        <div class="chart-card" id="lineChart" style="height: 400px;"></div>
    </div>

    <script>
        fetch('/api/stats/summary')
            .then(res => res.json())
            .then(data => {
                if (!data.ok) return alert("获取数据失败");

                // 1. 饼图
                var pieChart = echarts.init(document.getElementById('pieChart'));
                pieChart.setOption({
                    title: { text: '垃圾种类分布', left: 'center' },
                    tooltip: { trigger: 'item' },
                    series: [{ type: 'pie', radius: '50%', data: data.pie_data }]
                });

                // 2. 折线图
                var lineChart = echarts.init(document.getElementById('lineChart'));
                lineChart.setOption({
                    title: { text: '检测量趋势' },
                    xAxis: { type: 'category', data: data.line_data.labels },
                    yAxis: { type: 'value' },
                    series: [{ data: data.line_data.values, type: 'line', smooth: true }]
                });
            });
    </script>
</body>

</html>